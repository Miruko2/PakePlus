"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{1154:function(e,t,o){o.d(t,{deletePostWithUIUpdate:function(){return s}});var n=o(1654);async function s(e,t){return new Promise(async(o,s)=>{try{await Promise.all([n.OQ.from("comments").delete().eq("post_id",e),n.OQ.from("likes").delete().eq("post_id",e)]);let{error:r}=await n.OQ.from("posts").delete().eq("id",e);if(r){s(r);return}if("function"==typeof t){t(e),o(!0);return}o(!0),setTimeout(()=>{try{{let e=window.scrollY||document.documentElement.scrollTop;sessionStorage.setItem("post_delete_scroll",e.toString())}}catch(e){}window.location.reload()},300)}catch(e){s(e)}})}}}]);