"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[414],{2678:function(t,e,o){o.d(e,{a:function(){return d}}),o(7437);var n=o(2265),i=o(4756);let r="https:"===window.location.protocol,s=/^http:\/\/\d+\.\d+\.\d+\.\d+/.test(window.location.href);s||/^https:\/\/[a-zA-Z0-9]/.test(window.location.href),s||/^http:\/\/[a-zA-Z0-9]/.test(window.location.href),window.location.hostname.includes("miruko.fun");let a=window.navigator.userAgent.includes("capacitor")||window.navigator.userAgent.includes("android")||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),l=window.location.origin;(0,i.eI)("https://zlzgvfewbkfdduybzqtj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpsemd2ZmV3YmtmZGR1eWJ6cXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY1OTk0ODQsImV4cCI6MjA2MjE3NTQ4NH0.bEyo-AglmesUEpBxQEcl1fquCVUtUJv6fiKSDPcC0vk",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:r?"sb-https-session":"sb-session",storage:{getItem:t=>{try{let e=window.localStorage.getItem(t);if(e)return e;if(r){let e=window.sessionStorage.getItem(t);if(e){try{window.localStorage.setItem(t,e)}catch(t){}return e}}return null}catch(t){return console.warn("存储读取失败:",t),null}},setItem:(t,e)=>{try{window.localStorage.setItem(t,e),r&&window.sessionStorage.setItem(t,e)}catch(t){console.warn("存储写入失败:",t)}},removeItem:t=>{try{window.localStorage.removeItem(t),r&&window.sessionStorage.removeItem(t)}catch(t){console.warn("存储删除失败:",t)}}}},global:{headers:a?{"Cache-Control":"no-cache"}:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"authorization, x-client-info, apikey, content-type, Origin, Accept, X-Requested-With","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS, PATCH","Access-Control-Allow-Credentials":"true","Access-Control-Max-Age":"3600","Access-Control-Allow-Origin":window.navigator.userAgent.includes("Android")||window.navigator.userAgent.includes("capacitor")?l||"*":l&&["https://momotalk.miruko.fun","http://momotalk.miruko.fun","http://156.224.19.44:3000","http://156.224.19.44","http://localhost:3000","capacitor://localhost","http://localhost"].includes(l)||/^http:\/\/\d+\.\d+\.\d+\.\d+/.test(window.location.href)&&l?l:"https://momotalk.miruko.fun","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Origin:l||""},fetch:(t,e)=>{let o=window.location.origin,n=new AbortController,i=setTimeout(()=>{n.abort()},a?3e4:15e3),r={...e,signal:n.signal,credentials:"include",cache:"no-store"};if(!a){r.headers||(r.headers={});let t=new Headers(r.headers);o&&t.set("Origin",o),r.headers=t}return fetch(t,r).then(t=>(clearTimeout(i),t)).catch(t=>{throw clearTimeout(i),t})}}}),o(5083),o(4033),o(6633);let c=(0,n.createContext)({user:null,isAdmin:!1,loading:!0,connectionStatus:"checking",signIn:async()=>({error:null}),signUp:async()=>({error:null,data:null}),signOut:async()=>{},resetPassword:async()=>({error:null})}),d=()=>(0,n.useContext)(c)},6633:function(t,e,o){o.d(e,{T8:function(){return r},pE:function(){return n}});let n=()=>"file:"===window.location.protocol||!!window.Capacitor||/Android|webOS|iPhone|iPad|iPod/i.test(navigator.userAgent),i=()=>{if(!n())return"";let t=window.location.pathname,e=t.lastIndexOf("/");if(e<=0)return"../";let o=t.lastIndexOf("/",e-1);return o<=0?"../":t.substring(0,o+1)},r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{replace:o=!1,delay:r=0}=e,s=()=>{let e=t;if(n()&&!t.startsWith("http")){if("/"===t||""===t)e=i()+"index.html";else{let o=t.startsWith("/")?t.substring(1):t;e=i()+o+"/index.html"}}try{o?window.location.replace(e):window.location.href=e}catch(t){console.error("导航错误:",t),window.location.href=e}};r>0?setTimeout(s,r):s()}}}]);